<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Deploying Microservices App on AWS Elastic Container Service | TR</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="How to leverage AWS ECS for hosting containerized apps">
    <meta name="generator" content="Hugo 0.139.3">
    
    
    
      <meta name="robots" content="index, follow">
    
    
      <meta name="author" content = "Tom Ratcliff">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.3beb8fd3909830ffcdd447dd71cb8825627903acd361a84a51091ddd2182f403.css" >



    

    
      
<link rel="shortcut icon" href="/images/logo.png" type="image/x-icon" />


    

    

    
      <link rel="canonical" href="http://ltratcliff.com/posts/aws_ecr/">
    

    <meta property="og:url" content="http://ltratcliff.com/posts/aws_ecr/">
  <meta property="og:site_name" content="TR">
  <meta property="og:title" content="Deploying Microservices App on AWS Elastic Container Service">
  <meta property="og:description" content="How to leverage AWS ECS for hosting containerized apps">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-04-05T21:05:08-04:00">
    <meta property="article:modified_time" content="2022-04-05T21:05:08-04:00">
    <meta property="article:tag" content="AWS">
    <meta property="article:tag" content="ECS">
    <meta property="article:tag" content="ECR">

  <meta itemprop="name" content="Deploying Microservices App on AWS Elastic Container Service">
  <meta itemprop="description" content="How to leverage AWS ECS for hosting containerized apps">
  <meta itemprop="datePublished" content="2022-04-05T21:05:08-04:00">
  <meta itemprop="dateModified" content="2022-04-05T21:05:08-04:00">
  <meta itemprop="wordCount" content="1652">
  <meta itemprop="keywords" content="AWS,ECS,ECR">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Deploying Microservices App on AWS Elastic Container Service">
  <meta name="twitter:description" content="How to leverage AWS ECS for hosting containerized apps">

      
    
	
  </head><body class="ma0 avenir bg-near-white production">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        TR
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="Posts page">
              Posts
            </a>
          </li>
          
        </ul>
      
      <div class="ananke-socials"><a href="https://www.facebook.com/ltratcliff" target="_blank" rel="noopener"
        class="ananke-social-link link-transition facebook link dib z-999 pt3 pt0-l mr1"
        title="follow on Facebook - Opens in a new window"
        aria-label="follow on Facebook - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="https://twitter.com/ltratcliff" target="_blank" rel="noopener"
        class="ananke-social-link link-transition twitter link dib z-999 pt3 pt0-l mr1"
        title="follow on Twitter - Opens in a new window"
        aria-label="follow on Twitter - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="http://linkedin.com/in/ltratcliff" target="_blank" rel="noopener"
        class="ananke-social-link link-transition linkedin link dib z-999 pt3 pt0-l mr1"
        title="follow on LinkedIn - Opens in a new window"
        aria-label="follow on LinkedIn - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="https://stackoverflow.com/users/4176724" target="_blank" rel="noopener"
        class="ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1"
        title="follow on Stack Overflow - Opens in a new window"
        aria-label="follow on Stack Overflow - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="https://github.com/ltratcliff/" target="_blank" rel="noopener"
        class="ananke-social-link link-transition github link dib z-999 pt3 pt0-l mr1"
        title="follow on GitHub - Opens in a new window"
        aria-label="follow on GitHub - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="index.xml" target="_blank" rel="noopener"
        class="ananke-social-link link-transition rss link dib z-999 pt3 pt0-l mr1"
        title="follow on RSS - Opens in a new window"
        aria-label="follow on RSS - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"><a href="mailto:?&amp;body=http%3A%2F%2Fltratcliff.com%2Fposts%2Faws_ecr%2F&amp;subject=Deploying&#43;Microservices&#43;App&#43;on&#43;AWS&#43;Elastic&#43;Container&#43;Service"
        class="ananke-social-link email no-underline"
        title="Share on Email" aria-label="Share on Email"
        target="_blank" rel="nofollow noopener noreferrer">
        <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M64 112c-8.8 0-16 7.2-16 16l0 22.1L220.5 291.7c20.7 17 50.4 17 71.1 0L464 150.1l0-22.1c0-8.8-7.2-16-16-16L64 112zM48 212.2L48 384c0 8.8 7.2 16 16 16l384 0c8.8 0 16-7.2 16-16l0-171.8L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128C0 92.7 28.7 64 64 64l384 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 448c-35.3 0-64-28.7-64-64L0 128z"/></svg>
                
              </span></a><a href="https://facebook.com/sharer/sharer.php?&amp;u=http%3A%2F%2Fltratcliff.com%2Fposts%2Faws_ecr%2F"
        class="ananke-social-link facebook no-underline"
        title="Share on Facebook" aria-label="Share on Facebook"
        target="_blank" rel="nofollow noopener noreferrer">
        <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"/></svg>
                
              </span></a><a href="https://twitter.com/intent/tweet/?&amp;text=How&#43;to&#43;leverage&#43;AWS&#43;ECS&#43;for&#43;hosting&#43;containerized&#43;apps&amp;url=http%3A%2F%2Fltratcliff.com%2Fposts%2Faws_ecr%2F"
        class="ananke-social-link twitter no-underline"
        title="Share on Twitter" aria-label="Share on Twitter"
        target="_blank" rel="nofollow noopener noreferrer">
        <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
                
              </span></a><a href="https://www.linkedin.com/shareArticle?&amp;mini=true&amp;source=http%3A%2F%2Fltratcliff.com%2Fposts%2Faws_ecr%2F&amp;summary=How&#43;to&#43;leverage&#43;AWS&#43;ECS&#43;for&#43;hosting&#43;containerized&#43;apps&amp;title=Deploying&#43;Microservices&#43;App&#43;on&#43;AWS&#43;Elastic&#43;Container&#43;Service&amp;url=http%3A%2F%2Fltratcliff.com%2Fposts%2Faws_ecr%2F"
        class="ananke-social-link linkedin no-underline"
        title="Share on LinkedIn" aria-label="Share on LinkedIn"
        target="_blank" rel="nofollow noopener noreferrer">
        <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
                
              </span></a></div>
<h1 class="f1 athelas mt3 mb1">Deploying Microservices App on AWS Elastic Container Service</h1>
      
      <p class="tracked">
        By <strong>Tom Ratcliff</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2022-04-05T21:05:08-04:00">April 5, 2022</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><blockquote>
<p>&#x2764;&#xfe0f; Huge thanks to Nick White for capturing these notes while deploying</p>
</blockquote>
<h2 id="vpc-setup">VPC Setup</h2>
<h6 id="log-into-aws-then-click-the-services-tab-within-services-go-to-vpc">Log into AWS, then click the Services tab. Within Services, go to VPC:</h6>
<p><img src="/images/aws_ecs/01_VPC/VPC_1.png" alt=""></p>
<h6 id="then-select-create-vpc">Then select Create VPC:</h6>
<p><img src="/images/aws_ecs/01_VPC/VPC_2.png" alt=""></p>
<h6 id="mimic-these-settings-but-beware-of-existing-ip-conflicts-this-will-create-all-resources-required-to-get-started-public-and-private-subnets-nat-gateway-etc">Mimic these settings, but beware of existing IP conflicts. This will create all resources required to get started (public and private subnets, NAT gateway, etc):</h6>
<p><img src="/images/aws_ecs/01_VPC/VPC_3.png" alt="">
<img src="/images/aws_ecs/01_VPC/VPC_4.png" alt=""></p>
<h6 id="now-you-can-select-create-vpc-please-allow-5-10-minutes-for-full-creation">Now you can select Create VPC. Please allow 5-10 minutes for full creation.</h6>
<h6 id="after-all-the-resources-have-provisioned-you-should-see-the-success-of-the-workflow">After all the resources have provisioned, you should see the success of the workflow:</h6>
<p><img src="/images/aws_ecs/01_VPC/VPC_5.png" alt=""></p>
<h6 id="now-we-want-to-set-up-vpc-peering-between-this-vpc-and-the-prod-vpc-from-the-vpc-service-menu-select-peering-connections-from-the-left-side-then-select-create-peering-connection-from-the-top-right-populate-this-information">Now, we want to set up VPC peering between this VPC and the PROD VPC. From the VPC Service menu, select Peering Connections from the left side. Then select Create Peering connection from the top right. Populate this information:</h6>
<p><img src="/images/aws_ecs/01_VPC/VPC_6.PNG" alt=""></p>
<h6 id="now-we-need-to-accept-the-connection-from-the-aws-console-it-should-be-in-the-top-right-menu-somewhere-sorry-no-screenshot--">Now, we need to accept the connection from the AWS console. It should be in the top right menu somewhere (sorry, no screenshot ☹ )</h6>
<h6 id="navigate-to-the-route-tables-menu-from-the-vpc-service-menu-from-the-left-hand-side-we-will-be-adding-the-vpc-peering-connection-and-subnet-via-the-edit-routes-menu-on-each-of-the-route-tables">Navigate to the Route Tables menu from the VPC service menu from the left hand side. We will be adding the VPC peering connection and subnet via the Edit routes menu on EACH of the route tables:</h6>
<p><img src="/images/aws_ecs/01_VPC/VPC_7.PNG" alt="">
<img src="/images/aws_ecs/01_VPC/VPC_8.PNG" alt=""></p>
<p>Congratulations, you have successfully created a VPC and it&rsquo;s various networking pieces!</p>
<h2 id="target-group-setup">Target Group Setup</h2>
<h6 id="from-the-services-tab-select-ec2-from-the-ec2-dashboard-under-load-balancing-select-target-groups">From the Services tab, select EC2. From the EC2 Dashboard, under Load Balancing, select Target Groups:</h6>
<p><img src="/images/aws_ecs/02_TargetGroups/TG_1.png" alt=""></p>
<h6 id="from-the-ec2-target-groups-submenu-select-create-target-group">From the EC2 Target Groups submenu, select Create target group:</h6>
<p><img src="/images/aws_ecs/02_TargetGroups/TG_2.png" alt=""></p>
<h6 id="for-this-example-we-will-be-recreating-an-ip-address-based-target-group-we-will-be-leveraging-the-port-numbers-based-on-each-of-the-microservices-these-can-be-found-in-their-own-respective-gitlab-projects-for-this-example-we-are-creating-the-dev-ecs-query-tg">For this example, we will be recreating an IP Address based Target Group. We will be leveraging the port numbers based on each of the microservices. These can be found in their own respective GitLab projects. For this example, we are creating the DEV-ecs-query TG.</h6>
<p><img src="/images/aws_ecs/02_TargetGroups/TG_3.png" alt=""></p>
<h6 id="the-health-checks-can-also-be-found-within-gitlab">The health checks can also be found within GitLab:</h6>
<p><img src="/images/aws_ecs/02_TargetGroups/TG_4.png" alt=""></p>
<h6 id="select-next-and-do-not-enter-anything-on-the-next-page-the-reason-for-this-is-because-we-currently-do-not-have-any-loadbalancers-or-containers-built-we-can-now-create-the-tg">Select next, and do not enter anything on the next page. The reason for this is because we currently do not have any loadbalancers or containers built. We can now create the TG.</h6>
<p><img src="/images/aws_ecs/02_TargetGroups/TG_5.png" alt=""></p>
<h6 id="you-can-repeat-this-same-process-with-a-few-changes-name-port-and-health-check-endpoint-for-the-remaining-of-the-ip-address-based-target-groups-now-we-can-provision-an-application-load-balancer-tg-enter-the-information-below-and-select-next">You can repeat this same process with a few changes (name, port, and health check endpoint) for the remaining of the IP Address-based Target Groups. Now we can provision an Application Load Balancer TG. Enter the information below, and select Next:</h6>
<p><img src="/images/aws_ecs/02_TargetGroups/TG_6.png" alt=""></p>
<h6 id="select-add-an-application-load-balancer-later-and-then-create-the-target-group">Select Add an Application Load Balancer later, and then Create the target group:</h6>
<p><img src="/images/aws_ecs/02_TargetGroups/TG_7.png" alt=""></p>
<h6 id="after-repeating-the-previous-ip-target-groups-your-list-of-tgs-should-look-something-like-this">After repeating the previous IP Target Groups, your list of TG’s should look something like this:</h6>
<p><img src="/images/aws_ecs/02_TargetGroups/TG_8.png" alt=""></p>
<h6 id="take-note-of-the-load-balancer-column-we-will-be-manually-adding-these-in-guide-04-alb-and-elb">Take note of the Load balancer column. We will be manually adding these in guide 04, ALB and ELB.</h6>
<h2 id="security-group-setup">Security Group Setup</h2>
<h6 id="after-provisioning-the-ecs-cluster-and-load-balancers-we-should-have-all-the-security-groups-we-need-we-can-now-add-all-the-rules-necessary-go-to-ec2-in-the-aws-services-tab-then-security-groups-on-the-left">After provisioning the ECS Cluster and Load Balancers, we should have all the security groups we need. We can now add all the rules necessary. Go to EC2 in the AWS Services Tab, then Security Groups on the left:</h6>
<p><img src="/images/aws_ecs/03_SecurityGroups/SG1.png" alt=""></p>
<h6 id="now-in-the-dev-default-security-group-we-are-going-match-the-rules-to-the-prod-default-security-group">Now, in the DEV-default security group, we are going match the rules to the PROD-default security group:</h6>
<p><img src="/images/aws_ecs/03_SecurityGroups/SG2.png" alt=""></p>
<h6 id="we-can-see-that-the-the-prod-default-group-has-two-rules-one-of-the-rules-points-back-to-the-prod-default-security-group-so-we-will-add-those-now-by-selecting-the-dev-default-group-then-select-edit-inbound-rules-to-reach-this-page">We can see that the the PROD-default group has two rules. One of the rules points back to the PROD-default security group, so we will add those now, by selecting the DEV-default group, then select Edit inbound rules to reach this page:</h6>
<p><img src="/images/aws_ecs/03_SecurityGroups/SG3.png" alt=""></p>
<h6 id="from-here-we-can-addmodify-rules-once-added-select-save-rules">From here, we can add/modify rules. Once added, select Save rules:</h6>
<p><img src="/images/aws_ecs/03_SecurityGroups/SG4.png" alt=""></p>
<h6 id="now-we-can-match-up-the-service-groups-to-their-respective-dev-counterparts-since-we-are-leveraging-the-prod-db-all-dev-sgs-that-require-a-db-sg-will-use-the-prod-sg-otherwise-any-rule-that-points-to-a-prod-sg-will-be-pointing-to-its-dev-counterpart-instead">Now, we can match up the service groups to their respective DEV counterparts. Since we are leveraging the prod db, all DEV SG’s that require a DB SG will use the PROD SG. Otherwise, any rule that points to a PROD SG will be pointing to it’s DEV counterpart instead.</h6>
<p><img src="/images/aws_ecs/03_SecurityGroups/SG5.png" alt="">
<img src="/images/aws_ecs/03_SecurityGroups/SG6.png" alt="">
<img src="/images/aws_ecs/03_SecurityGroups/SG7.png" alt=""></p>
<h6 id="ensure-that-the-prod-db-sg-has-all-relevant-rules-this-will-include-allowing-traffic-from-the-dev-vpc">Ensure that the PROD DB SG has all relevant rules. This will include allowing traffic from the DEV VPC.</h6>
<p><img src="/images/aws_ecs/03_SecurityGroups/SG8.PNG" alt=""></p>
<h2 id="application-and-network-load-balancers">Application and Network Load Balancers</h2>
<h6 id="within-aws-select-ec2-from-the-services-tab-then-select-load-balancers-on-that-page-select-create-load-balancer">Within AWS, select EC2 from the Services tab. Then select Load Balancers. On that page, select Create Load Balancer:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB1.png" alt=""></p>
<h6 id="choose-nlb">Choose NLB:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB2.png" alt=""></p>
<h6 id="select-your-load-balancer-name-and-use-the-parameters-shown-use-two-public-subnets-and-create-two-listener-rules-using-the-alb-tg-we-created-earlier">Select your load balancer name, and use the parameters shown. Use two PUBLIC subnets, and create two listener rules using the ALB TG we created earlier:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB3.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB4.png" alt=""></p>
<h6 id="after-selecting-create-load-balancer-you-will-be-taken-to-this-screen-please-allow-5-10-minutes-for-nlb-creation">After selecting create Load Balancer, you will be taken to this screen. Please allow 5-10 minutes for NLB creation.</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB5.png" alt=""></p>
<h6 id="after-your-nlb-provisions-you-can-create-your-alb">After your NLB provisions, you can create your ALB:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB6.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB7.png" alt=""></p>
<h6 id="create-your-internal-alb-using-private-subnets-the-listener-we-are-creating-will-be-modified-in-the-future-but-is-necessary-for-a-placeholder">Create your internal ALB using PRIVATE subnets. The listener we are creating will be modified in the future, but is necessary for a placeholder:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB8.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB9.png" alt=""></p>
<h6 id="please-allow-5--10-minutes-for-the-alb-to-provision">Please allow 5 – 10 minutes for the ALB to provision.</h6>
<h6 id="now-we-can-move-on-to-dns-within-the-services-tab-select-cloud-map-then-create-a-new-namespace">Now we can move on to DNS. Within the Services tab, select Cloud Map. Then create a new namespace:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB10.png" alt=""></p>
<h6 id="once-your-namespace-has-provisioned-click-on-it-and-then-create-service">Once your namespace has provisioned, click on it and then Create service:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB11.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB12.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB13.png" alt=""></p>
<h6 id="within-the-elb-add-a-listener-with-these-settings">Within the ELB, add a listener with these settings:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB14.png" alt=""></p>
<h6 id="then-add-another-listener-to-the-alb-with-these-settings">Then add another listener to the ALB with these settings:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB15.png" alt=""></p>
<h6 id="now-youll-have-to-reach-out-to-ccmo-clay-reiche-to-add-the-domain-name-we-want-to-dns">Now, you&rsquo;ll have to reach out to CCMO (Clay Reiche) to add the domain name we want to DNS.</h6>
<h6 id="after-that-is-done-we-can-add-the-remaining-listeners-to-the-elb">After that is done, we can add the remaining listeners to the ELB:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB16.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB17.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB18.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB19.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB20.png" alt="">
<img src="/images/aws_ecs/04_ALB_and_ELB/LB21.png" alt=""></p>
<h6 id="now-from-the-load-balancer-menu-on-the-https-443-row-select-viewedit-rules">Now, from the Load Balancer menu, on the HTTPS: 443 row, select View/edit rules:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB22.png" alt=""></p>
<h6 id="now-select-the--at-the-top-of-the-page-next-to-rules-then-add-this-rule">Now, select the + at the top of the page next to rules, then add this rule:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB23.png" alt=""></p>
<h6 id="add-the-remaining-rules">Add the remaining rules:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB24.png" alt=""></p>
<h6 id="after-this-we-can-finally-add-the-alb-to-the-alb-target-group-we-provisioned-earlier">After this, we can finally add the ALB to the ALB target group we provisioned earlier:</h6>
<p><img src="/images/aws_ecs/04_ALB_and_ELB/LB25.png" alt=""></p>
<h3 id="load-balancer-setup-complete">Load Balancer setup complete!</h3>
<h2 id="elastic-container-registry-setup">Elastic Container Registry Setup</h2>
<p>In the AWS Services tab, navigate to Elastic Container Registry</p>
<p><img src="/images/aws_ecs/05_ECR/ecr1.jpg" alt=""></p>
<p>Once here, select the &ldquo;Create Repository&rdquo; on the top right</p>
<p><img src="/images/aws_ecs/05_ECR/ecr2.jpg" alt=""></p>
<p>Name your repo and then select the &ldquo;Create Repository&rdquo; on the bottom right</p>
<p><img src="/images/aws_ecs/05_ECR/ecr3.jpg" alt=""></p>
<p>After creation, the new repo will be visible.</p>
<ul>
<li>Repository Name will be a link to details about the image repo</li>
<li>The URI contains the location to push/pull from</li>
</ul>
<p><img src="/images/aws_ecs/05_ECR/ecr4.jpg" alt=""></p>
<blockquote>
<p>&#x2139;&#xfe0f; Click the repo name under the &ldquo;Repository Name&rdquo; column to add container aws_ecs to repo</p>
</blockquote>
<p>There will be an empty repo with no container aws_ecs listed</p>
<p>To add aws_ecs click the &ldquo;View Push Commands&rdquo; in the top right</p>
<p><img src="/images/aws_ecs/05_ECR/ecr5.jpg" alt=""></p>
<p>This will show 4 steps</p>
<p><img src="/images/aws_ecs/05_ECR/ecr6.jpg" alt=""></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws ecr get-login-password --region us-gov-west-1 | docker login --username AWS --password-stdin 407355966437.dkr.ecr.us-gov-west-1.amazonaws.com
</span></span><span style="display:flex;"><span>docker build -t mytestrepo .
</span></span><span style="display:flex;"><span>docker tag mytestrepo:latest 407355966437.dkr.ecr.us-gov-west-1.amazonaws.com/mytestrepo:latest
</span></span><span style="display:flex;"><span>docker push 407355966437.dkr.ecr.us-gov-west-1.amazonaws.com/mytestrepo:latest
</span></span></code></pre></div><p>Once pushed, you will see container aws_ecs in the repository</p>
<p><img src="/images/aws_ecs/05_ECR/ecr7.jpg" alt=""></p>
<h2 id="elastic-container-service-setup">Elastic Container Service Setup</h2>
<h6 id="in-the-aws-services-tab-navigate-to-elastic-container-service-and-then-select-create-cluster">In the AWS Services tab, navigate to Elastic Container Service, and then select Create Cluster:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS1.png" alt=""></p>
<h6 id="select-networking-only-so-we-can-leverage-aws-fargate-serverless-nodes">Select Networking only so we can leverage AWS FarGate (serverless nodes):</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS2.png" alt="">
<img src="/images/aws_ecs/06_ECS/ECS3.png" alt="">
<img src="/images/aws_ecs/06_ECS/ECS4.png" alt=""></p>
<h6 id="before-we-create-a-task-def-we-need-to-get-our-env-vars-in-place-open-s3-and-add-a-file-named-something-like-env_var_devenv-the-contents-will-look-something-like-this">Before we create a task def, we need to get our env vars in place. Open S3, and add a file named something like env_var_dev.env. The contents will look something like this:</h6>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-.ini" data-lang=".ini"><span style="display:flex;"><span><span style="color:#a6e22e">FLASK_ENV</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;docker&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">FLASK_APP</span><span style="color:#f92672">=</span><span style="color:#e6db74">app.py</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">PYTHONDONTWRITEBYTECODE</span><span style="color:#f92672">=</span><span style="color:#e6db74">1</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ENV_DATABASE_HOST</span><span style="color:#f92672">=</span><span style="color:#e6db74">dev-1.cv34trxukfu4.us-gov-west-1.rds.amazonaws.com</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ENV_DATABASE_NAME</span><span style="color:#f92672">=</span><span style="color:#e6db74">postgres-dev</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ENV_DATABASE_USERNAME</span><span style="color:#f92672">=</span><span style="color:#e6db74">SUPERCOOLUSERNAME</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ENV_DATABASE_PASSWORD</span><span style="color:#f92672">=</span><span style="color:#e6db74">XXXXXXXXXXXXXXXXXXXX</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ENV_DATABASE_PORT</span><span style="color:#f92672">=</span><span style="color:#e6db74">5432</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ENV_SECRET_KEY</span><span style="color:#f92672">=</span><span style="color:#e6db74">XXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ENV_REGISTRATION_TOKEN</span><span style="color:#f92672">=</span><span style="color:#e6db74">XXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ENV_AUTH_SERVICE_URL</span><span style="color:#f92672">=</span><span style="color:#e6db74">https://dev-socmed-nlp.soccloudha.net</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ENV_BASE_URL</span><span style="color:#f92672">=</span><span style="color:#e6db74">https://dev-socmed-nlp.soccloudha.net</span>
</span></span></code></pre></div><p><img src="/images/aws_ecs/06_ECS/ECS5.png" alt=""></p>
<h6 id="now-go-back-to-ecs-in-the-aws-console-then-select-task-definitions-on-the-left-column-now-create-a-new-task-definition">Now go back to ECS in the AWS console, then Select Task Definitions on the left column. Now create a new Task Definition:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS6.png" alt=""></p>
<h6 id="ensure-fargate-is-selected-then-hit-next">Ensure FarGate is selected, then hit next:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS7.png" alt=""></p>
<h6 id="name-your-task-def-and-ensure-it-has-the-ecstaskexecutionrole-attached">Name your task def, and ensure it has the ecsTaskExecutionRole attached:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS8.png" alt=""></p>
<h6 id="populate-the-task-execution-iam-role-and-task-size-sections-then-select-add-container">Populate the Task execution IAM role and Task size sections, then select Add container:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS9.png" alt=""></p>
<h6 id="in-a-new-tab-open-ecr-then-copy-the-uri-for-the-container">In a new tab, open ECR, then copy the URI for the container:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS10.png" alt=""></p>
<h6 id="on-the-previous-tab-you-can-now-populate-the-image-section-as-well-as-the-rest-of-the-info-required-be-sure-to-include-the-dev-tag-and-proper-container-name">On the previous tab, you can now populate the Image section, as well as the rest of the info required. Be sure to include the dev tag, and proper container name.</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS11.png" alt="">
<img src="/images/aws_ecs/06_ECS/ECS12.png" alt=""></p>
<h6 id="the-rest-of-the-options-will-be-left-default-ensure-you-add-the-env_vars_devenv-file-to-environment-files-and-that-the-port-mapping-matches-what-is-in-the-load-balancer-once-youve-finished-the-first-container-it-will-appear-in-container-definitions-you-can-now-create-the-task-definition--repeat-this-process-for-all-other-containers-after-this-is-complete-we-can-now-create-the-services-from-the-task-defs-select-your-cluster-from-ecs-then-under-the-services-tab-select-create-service">The rest of the options will be left default. Ensure you add the env_vars_dev.env file to Environment Files, and that the port mapping matches what is in the load balancer Once you’ve finished the first container, it will appear in Container definitions. You can now create the task definition.  Repeat this process for all other containers. After this is complete, we can now create the services from the task defs. Select your cluster from ECS, then under the services tab, select Create service:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS13.png" alt=""></p>
<h6 id="create-your-service-using-the-following-options-then-select-next-step">Create your service using the following options, then select Next step:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS14.png" alt="">
<img src="/images/aws_ecs/06_ECS/ECS15.png" alt=""></p>
<h6 id="select-your-vpc-and-private-subnets">Select your VPC and PRIVATE subnets:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS16.png" alt=""></p>
<h6 id="now-edit-the-security-group-create-a-new-security-group-and-name-it-something-like-dev-nlp-auth-we-will-modify-the-rules-later-on">Now, edit the security group. Create a new security group, and name it something like DEV-nlp-auth. We will modify the rules later on:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS17.png" alt=""></p>
<h6 id="under-load-balancing-select-alb-then-choose-the-loadbalancer-we-provisioned-earlier-as-well-as-the-target-group-we-made-earlier">Under Load balancing, select ALB, then choose the loadbalancer we provisioned earlier, as well as the target group we made earlier:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS18.png" alt=""></p>
<h6 id="the-rest-of-the-information-will-autopopulate-so-select-next-step-we-will-configure-auto-scaling-later-on-as-well-so-select-next-step-again-at-the-review-page-verify-all-of-the-information-is-correct-and-then-create-service">The rest of the information will autopopulate, so select Next step. We will configure auto scaling later on as well, so select Next step again. At the review page, verify all of the information is correct, and then Create service:</h6>
<p><img src="/images/aws_ecs/06_ECS/ECS19.png" alt=""></p>
<h6 id="follow-these-same-steps-for-the-rest-of-the-services-noting-the-port-service-name-private-subnets-and-target-group-sections-be-sure-to-name-the-security-group-it-creates-in-order-to-keep-things-organized">Follow these same steps for the rest of the services, noting the port, service name, private subnets, and target group sections. Be sure to name the security group it creates in order to keep things organized.</h6>
<h2 id="aws-code-builder">AWS Code Builder</h2>
<h1 id="create-a-code-pipeline">Create a Code Pipeline</h1>
<blockquote>
<p>&#x2139;&#xfe0f; Creating a pipeline ensures when a new container image is pushed to ECR a new Task (container) will be deployed</p>
</blockquote>
<p>In the AWS Services tab, navigate to <strong>Code Pipeline</strong></p>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb1.jpg" alt=""></p>
<p>Once here, select the &ldquo;Create Pipeline&rdquo; on the top right</p>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb2.jpg" alt=""></p>
<h3 id="step-1">Step 1</h3>
<p>Name your pipeline, service, etc. Then select <strong>Next</strong></p>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb3.jpg" alt=""></p>
<h3 id="step-2">Step 2</h3>
<p>Select Amazon ECR and the Container Image Repo Name and tag</p>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb4.jpg" alt=""></p>
<h3 id="step-3">Step 3</h3>
<p>Select AWS CodeBuild then click <strong>Create Project</strong></p>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb5.jpg" alt=""></p>
<blockquote>
<p>&#x2139;&#xfe0f; Clicking <strong>Create Project</strong> opens a new window with a separate form</p>
</blockquote>
<p>Fill out form
<img src="/images/aws_ecs/07_CodeBuilder/cb6.jpg" alt=""></p>
<p>For BuildSpec select <strong>Insert Build Commands</strong> and then <strong>Editor</strong></p>
<p>Copy this text to the editor</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">version</span>: <span style="color:#ae81ff">0.2</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">phases</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">commands</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">ContainerName=&#34;nlp_web_app&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">ImageURI=&#34;407355966437.dkr.ecr.us-gov-west-1.amazonaws.com/nlp_web_app:prod&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">printf &#39;[{&#34;name&#34;:&#34;CONTAINER_NAME&#34;,&#34;imageUri&#34;:&#34;IMAGE_URI&#34;}]&#39; &gt; imagedefinitions.json</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">sed -i -e &#34;s|CONTAINER_NAME|$ContainerName|g&#34; imagedefinitions.json</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">sed -i -e &#34;s|IMAGE_URI|$ImageURI|g&#34; imagedefinitions.json</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">cat imagedefinitions.json</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">artifacts</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">files</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#ae81ff">imagedefinitions.json</span>
</span></span></code></pre></div><blockquote>
<p>&#x26a0;&#xfe0f; The highlighted <strong>ContainerName</strong> must match the container name in the TaskDef for the service
&#x26a0;&#xfe0f; The highlighted <strong>ImageURI</strong> must match the container repo and tag desired</p>
</blockquote>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb7.jpg" alt=""></p>
<p>Select <strong>Continue to CodePipeline</strong>
This will close the window and prompt that a Project name was created</p>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb8.jpg" alt=""></p>
<h3 id="step-4">Step 4</h3>
<ul>
<li>Deploy Provider will be <strong>Amazon ECS</strong></li>
<li>Select ECS Cluster</li>
<li>Select the service to update on ECR image update</li>
<li>Select <strong>Next</strong></li>
</ul>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb9.jpg" alt=""></p>
<h3 id="step-5">Step 5</h3>
<p>Review inputs and select <strong>Create Pipeline</strong></p>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb10.jpg" alt=""></p>
<h3 id="created">Created</h3>
<p>Once create you will see your pipeline listed</p>
<p>Test the pipeline by pushing an updated container image to ECR</p>
<p><img src="/images/aws_ecs/07_CodeBuilder/cb11.jpg" alt=""></p>
<h2 id="aws-relational-databases">AWS Relational Databases</h2>
<h6 id="from-the-services-tab-navigate-to-the-rds-section-then-select-create-database-follow-these-settings-to-create-your-production-database-this-will-serve-as-the-database-for-both-prod-and-dev">From the services tab, navigate to the RDS section, then select Create database. Follow these settings to create your production database. This will serve as the database for both PROD and DEV.</h6>
<p><img src="aws_ecs/08_RDS/DB1.PNG" alt="">
<img src="/images/aws_ecs/08_RDS/DB2.PNG" alt="">
<img src="/images/aws_ecs/08_RDS/DB3.PNG" alt="">
<img src="/images/aws_ecs/08_RDS/DB4.PNG" alt=""></p>
<h3 id="you-can-now-select-create-database-at-the-bottom-right-corner">You can now select Create database at the bottom right corner.</h3>
<ul class="pa0">
  
   <li class="list di">
     <a href="/tags/aws/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">AWS</a>
   </li>
  
   <li class="list di">
     <a href="/tags/ecs/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">ECS</a>
   </li>
  
   <li class="list di">
     <a href="/tags/ecr/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">ECR</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
        <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "ltratcliff-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">What&#39;s in this posts</p>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#vpc-setup">VPC Setup</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#target-group-setup">Target Group Setup</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#security-group-setup">Security Group Setup</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#application-and-network-load-balancers">Application and Network Load Balancers</a>
      <ul>
        <li></li>
        <li><a href="#load-balancer-setup-complete">Load Balancer setup complete!</a></li>
      </ul>
    </li>
    <li><a href="#elastic-container-registry-setup">Elastic Container Registry Setup</a></li>
    <li><a href="#elastic-container-service-setup">Elastic Container Service Setup</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#aws-code-builder">AWS Code Builder</a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#step-1">Step 1</a></li>
        <li><a href="#step-2">Step 2</a></li>
        <li><a href="#step-3">Step 3</a></li>
        <li><a href="#step-4">Step 4</a></li>
        <li><a href="#step-5">Step 5</a></li>
        <li><a href="#created">Created</a></li>
      </ul>
    </li>
    <li><a href="#aws-relational-databases">AWS Relational Databases</a>
      <ul>
        <li></li>
        <li><a href="#you-can-now-select-create-database-at-the-bottom-right-corner">You can now select Create database at the bottom right corner.</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://ltratcliff.com/" >
    &copy;  TR 2024 
  </a>
    <div><div class="ananke-socials"><a href="https://www.facebook.com/ltratcliff" target="_blank" rel="noopener"
        class="ananke-social-link link-transition facebook link dib z-999 pt3 pt0-l mr1"
        title="follow on Facebook - Opens in a new window"
        aria-label="follow on Facebook - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="https://twitter.com/ltratcliff" target="_blank" rel="noopener"
        class="ananke-social-link link-transition twitter link dib z-999 pt3 pt0-l mr1"
        title="follow on Twitter - Opens in a new window"
        aria-label="follow on Twitter - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="http://linkedin.com/in/ltratcliff" target="_blank" rel="noopener"
        class="ananke-social-link link-transition linkedin link dib z-999 pt3 pt0-l mr1"
        title="follow on LinkedIn - Opens in a new window"
        aria-label="follow on LinkedIn - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="https://stackoverflow.com/users/4176724" target="_blank" rel="noopener"
        class="ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1"
        title="follow on Stack Overflow - Opens in a new window"
        aria-label="follow on Stack Overflow - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="https://github.com/ltratcliff/" target="_blank" rel="noopener"
        class="ananke-social-link link-transition github link dib z-999 pt3 pt0-l mr1"
        title="follow on GitHub - Opens in a new window"
        aria-label="follow on GitHub - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a><a href="index.xml" target="_blank" rel="noopener"
        class="ananke-social-link link-transition rss link dib z-999 pt3 pt0-l mr1"
        title="follow on RSS - Opens in a new window"
        aria-label="follow on RSS - Opens in a new window">
      <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>
            
          </span>
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a></div>
</div>
  </div>
</footer>

  </body>
</html>
